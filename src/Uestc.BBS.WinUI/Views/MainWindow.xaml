<?xml version="1.0" encoding="utf-8" ?>
<winex:WindowEx
    x:Class="Uestc.BBS.WinUI.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Uestc.BBS.WinUI.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tb="using:H.NotifyIcon"
    xmlns:winex="using:WinUIEx"
    Title="清水河畔"
    Width="1200"
    Height="800"
    MinWidth="900"
    MinHeight="560"
    mc:Ignorable="d">

    <winex:WindowEx.SystemBackdrop>
        <MicaBackdrop />
    </winex:WindowEx.SystemBackdrop>

    <Grid>
        <tb:TaskbarIcon
            IconSource="/Assets/Icons/app.ico"
            LeftClickCommand="{x:Bind ShowMainViewCommand}"
            ToolTipService.Placement="Mouse"
            ToolTipText="清水河畔">
            <tb:TaskbarIcon.ContextFlyout>
                <MenuFlyout AreOpenCloseAnimationsEnabled="False">
                    <MenuFlyoutItem Command="{x:Bind OpenAboutDialogCommand}" Text="关于" />
                    <MenuFlyoutItem Text="检查更新" />
                    <MenuFlyoutSeparator />
                    <ToggleMenuFlyoutItem
                        Command="{x:Bind ToggleSilentStartCommand}"
                        IsChecked="{x:Bind ViewModel.AppSettingModel.Apperance.StartupAndShutdown.SilentStart, Mode=TwoWay}"
                        Text="静默启动" />
                    <ToggleMenuFlyoutItem
                        Command="{x:Bind ToggleDailysentenceEnabledCommand}"
                        IsChecked="{x:Bind ViewModel.AppSettingModel.Apperance.SearchBar.IsDailySentenceEnabled, Mode=TwoWay}"
                        Text="每日一句" />
                    <MenuFlyoutSeparator />
                    <MenuFlyoutItem Command="{x:Bind RestartCommand}" Text="重新启动" />
                    <MenuFlyoutItem Command="{x:Bind ExitCommand}" Text="退出" />
                </MenuFlyout>
            </tb:TaskbarIcon.ContextFlyout>
        </tb:TaskbarIcon>
        <local:MainPage />
    </Grid>

</winex:WindowEx>
